(()=>{"use strict";var e={384:(e,t,o)=>{e.exports=o.p+"bed8c136e13907f5eefb.svg"},117:(e,t,o)=>{e.exports=o.p+"6666407ac3aa5af1d5de.jpg"},400:(e,t,o)=>{e.exports=o.p+"84a69e2a88582107beb5.jpg"},359:(e,t,o)=>{e.exports=o.p+"81f9808b88871ce01200.jpg"},362:(e,t,o)=>{e.exports=o.p+"d54fc136d7e0d52199e6.jpg"},871:(e,t,o)=>{e.exports=o.p+"8a65f75d3d836c291cc9.svg"},302:(e,t,o)=>{e.exports=o.p+"2af49b82d305a6ea3442.svg"},629:(e,t,o)=>{e.exports=o.p+"6c7bf05444b9793fdf6e.svg"},999:(e,t,o)=>{e.exports=o.p+"a7ffe37dcb927ba0c46c.svg"},38:(e,t,o)=>{e.exports=o.p+"df0c965524717a3fd8e9.svg"},576:(e,t,o)=>{e.exports=o.p+"0863e5bc26221680f1e2.svg"}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,o),c.exports}o.m=e,o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.p="",o.b=document.baseURI||self.location.href;var n={};(()=>{o.d(n,{MP:()=>R,HB:()=>A,eb:()=>m,mo:()=>x,Qn:()=>L});var e=function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),o.classList.remove("form__input-error_active"),o.textContent=""},t=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("button_inactive")):(t.disabled=!0,t.classList.add("button_inactive"))};function r(o){if(o){var n=Array.from(o.querySelectorAll(".popup__input")),r=o.querySelector(".popup__button");n.forEach((function(t){e(o,t)})),t(n,r)}}function c(e){e.classList.toggle("popup_is-opened",!0),document.addEventListener("keydown",A),r(e.querySelector(".popup__form"))}function a(e){e.classList.toggle("popup_is-opened",!1),document.removeEventListener("keydown",A)}function i(e){e.classList.toggle("popup_is-animated",!0)}var u={baseUrl:"https://mesto.nomoreparties.co./v1/wff-cohort-8",headers:{authorization:"87691625-13ec-4341-b0af-c66cd14a8b2e","Content-Type":"application/json"}};function s(e,t){var o=e.querySelector(".count_like"),n=e.querySelector(".card__like-button");n.classList.contains("card__like-button_is-active")||(n.classList.add("card__like-button_is-active"),localStorage.setItem("like-".concat(t._id),!0),fetch("https://mesto.nomoreparties.co/v1/wff-cohort-8/cards/likes/".concat(e.dataset.id),{method:"PUT",headers:{authorization:"87691625-13ec-4341-b0af-c66cd14a8b2e"}}).then((function(e){return e.json()})).then((function(e){o.textContent=e.likes.length,t.likes=e.likes})).catch((function(e){return console.error("Ошибка при постановке лайка:",e)})))}function l(e,t){var o=e.querySelector(".count_like"),n=e.querySelector(".card__like-button");n.classList.contains("card__like-button_is-active")&&(n.classList.remove("card__like-button_is-active"),localStorage.setItem("like-".concat(t._id),!1),fetch("https://mesto.nomoreparties.co/v1/wff-cohort-8/cards/likes/".concat(e.dataset.id),{method:"DELETE",headers:{authorization:"87691625-13ec-4341-b0af-c66cd14a8b2e"}}).then((function(e){return e.json()})).then((function(e){o.textContent=e.likes.length,t.likes=e.likes})).catch((function(e){return console.error("Ошибка при удалении лайка:",e)})))}function d(e){fetch("https://mesto.nomoreparties.co/v1/wff-cohort-8/cards/".concat(e.dataset.id),{method:"DELETE",headers:{authorization:"87691625-13ec-4341-b0af-c66cd14a8b2e"}}).then((function(t){t.ok?(e.remove(),a(document.querySelector(".popup_type_delete"))):console.error("Ошибка при удалении карточки:",t.status)})).catch((function(e){return console.error("Ошибка при удалении карточки:",e)}))}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}document.querySelector("#card-template").content.querySelector(".places__item"),fetch("".concat(u.baseUrl,"/users/me"),{method:"GET",headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){var t=document.querySelector(".profile__title"),o=document.querySelector(".profile__description"),n=document.querySelector(".profile__image");t.textContent=e.name,o.textContent=e.about,n.style.backgroundImage="url(".concat(e.avatar,")")})).catch((function(e){console.error(e)}));var f=document.querySelector(".places__list"),m=document.querySelector(".popup_type_image"),_=(new URL(o(384),o.b),new URL(o(117),o.b),new URL(o(400),o.b),new URL(o(359),o.b),new URL(o(362),o.b),new URL(o(871),o.b),new URL(o(302),o.b),new URL(o(629),o.b),new URL(o(999),o.b),new URL(o(38),o.b),new URL(o(576),o.b),document.querySelector(".profile__image")),y=document.querySelector(".popup_type_change-avatar"),v=document.querySelector(".popup__input_type_name"),b=document.querySelector(".popup__input_type_description"),h=document.querySelector(".profile__edit-button"),S=document.querySelector(".popup_type_edit"),g=document.querySelector(".popup_type_new-card"),q=document.querySelectorAll(".popup__close"),k=document.querySelector(".profile__add-button"),L=document.querySelector(".profile__title"),x=document.querySelector(".profile__description"),E=y.querySelector(".popup__form"),C=g.querySelector(".popup__form"),w=document.querySelectorAll(".popup"),j=document.querySelector(".popup__image"),U=document.querySelector(".popup__caption");function A(e){"Escape"===e.key&&a(document.querySelector(".popup_is-opened"))}function I(e,t){t?(e.textContent="Сохранение...",e.disabled=!0):(e.textContent="Сохранить",e.disabled=!1)}i(g),i(S),v.value=L.textContent,b.value=x.textContent,_.addEventListener("click",(function(){I(E.querySelector(".button"),!1),c(y)})),q.forEach((function(e){e.addEventListener("click",(function(){a(e.closest(".popup"))}))})),h.addEventListener("click",(function(){I(O.querySelector(".button"),!1),r(O),v.value=L.textContent,b.value=x.textContent,c(S)})),k.addEventListener("click",(function(){I(C.querySelector(".button"),!1),c(g)})),w.forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&a(e)}))}));var O=S.querySelector(".popup__form");function P(e){c(m),j.src=e.link,j.alt=e.name,U.textContent=e.name}function R(e,t){var o=function(e,t,o,n,r,a){e.likes||(e.likes=[]);var u=document.querySelector("#card-template").content.cloneNode(!0).querySelector(".card");u.dataset.id=e._id;var s,l=u.querySelector(".card__image"),d=u.querySelector(".card__title"),f=u.querySelector(".card__delete-button"),_=u.querySelector(".card__like-button");return u.querySelector(".count_like").textContent=e.likes.length,l.src=e.link,l.alt=e.name,d.textContent=e.name,i(m),a?(f.style.display="block",f.addEventListener("click",(function(){c(document.querySelector(".popup_type_delete")),document.querySelector(".confirm_delete__button").addEventListener("click",(function(){t(u)}))})),localStorage.setItem("myCards",JSON.stringify([].concat(function(e){if(Array.isArray(e))return p(e)}(s=JSON.parse(localStorage.getItem("myCards")||"[]"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?p(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e._id])))):f.style.display="none",_.addEventListener("click",(function(){_.classList.contains("card__like-button_is-active")?n(u,e):o(u,e)})),l.addEventListener("click",(function(){r(e)})),u}(e,d,s,l,P,t);"true"===localStorage.getItem("like-".concat(e._id))&&o.querySelector(".card__like-button").classList.add("card__like-button_is-active"),f.insertBefore(o,f.firstChild)}O.addEventListener("submit",(function(e){e.preventDefault();var t,o,n=O.querySelector(".button"),r=O.elements.name.value,c=O.elements.description.value;L.textContent=r,x.textContent=c,t=r,o=c,fetch("".concat(u.baseUrl,"/users/me"),{method:"PATCH",headers:u.headers,body:JSON.stringify({name:t,about:o})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){L.textContent=e.name,x.textContent=e.about})).catch((function(e){console.error("Ошибка при обновлении информации о пользователе:",e)})),I(n,!0),a(S)})),C.addEventListener("submit",(function(e){var t;e.preventDefault(),I(C.querySelector(".button"),!0),(t={name:document.querySelector('input[name="place-name"]').value,link:C.elements.link.value},fetch("".concat(u.baseUrl,"/cards"),{method:"POST",headers:u.headers,body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return console.log(e),e})).catch((function(e){console.error(e)}))).then((function(e){R(e,!0),C.reset(),a(g)})).catch((function(e){console.error(e)}))})),E.addEventListener("submit",(function(e){e.preventDefault();var t,o=E.querySelector(".button"),n=E.elements.link.value;_.style.backgroundImage="url(".concat(n,")"),t=n,fetch("https://mesto.nomoreparties.co./v1/wff-cohort-8/users/me/avatar",{method:"PATCH",headers:u.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){console.log("Avatar updated successfully:",e)})).catch((function(e){console.error("Error updating avatar:",e)})),I(o,!0),a(y)})),fetch("".concat(u.baseUrl,"/cards"),{headers:u.headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){e.forEach((function(e){R(e,JSON.parse(localStorage.getItem("myCards")||"[]").includes(e._id))}))})).catch((function(e){console.log(e)})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(o){o.addEventListener("submit",(function(e){e.preventDefault()})),function(o){var n=Array.from(o.querySelectorAll(".popup__input")),r=o.querySelector(".popup__button");t(n,r),n.forEach((function(c){c.addEventListener("input",(function(){!function(t,o){o.validity.valueMissing?o.setCustomValidity("Вы пропустили это поле."):o.validity.patternMismatch?o.setCustomValidity("Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы."):o.setCustomValidity(""),o.validity.valid?e(t,o):function(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),n.textContent=o,n.classList.add("form__input-error_active")}(t,o,o.validationMessage)}(o,c),t(n,r)}))}))}(o)}))})()})();